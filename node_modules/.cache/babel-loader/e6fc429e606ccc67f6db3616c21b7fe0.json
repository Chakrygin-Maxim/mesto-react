{"ast":null,"code":"import _classCallCheck from\"C:/Users/chakrygin/dev/react-mesto-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/chakrygin/dev/react-mesto-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{url}from\"./utils\";var Api=/*#__PURE__*/function(){function Api(){_classCallCheck(this,Api);this._url=url;}_createClass(Api,[{key:\"_handleResponse\",value:function _handleResponse(res){if(!res.ok){return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}return res.json();}},{key:\"_handleGetToken\",value:function _handleGetToken(){return\"Bearer \".concat(localStorage.getItem(\"jwt\"));}},{key:\"getUserInfo\",value:function getUserInfo(){return fetch(\"\".concat(this._url,\"/users/me\"),{headers:{authorization:this._handleGetToken(),\"content-type\":\"application/json\"}}).then(this._handleResponse);}},{key:\"updateUserInfo\",value:function updateUserInfo(name,about){return fetch(\"\".concat(this._url,\"/users/me\"),{method:\"PATCH\",headers:{authorization:this._handleGetToken(),\"content-type\":\"application/json\"},body:JSON.stringify({name:name,about:about})}).then(this._handleResponse);}},{key:\"getInitialCards\",value:function getInitialCards(){return fetch(\"\".concat(this._url,\"/cards\"),{headers:{authorization:this._handleGetToken(),\"content-type\":\"application/json\"}}).then(this._handleResponse);}},{key:\"addCard\",value:function addCard(name,link){return fetch(\"\".concat(this._url,\"/cards\"),{method:\"POST\",headers:{authorization:this._handleGetToken(),\"content-type\":\"application/json\"},body:JSON.stringify({name:name,link:link})}).then(this._handleResponse);}},{key:\"deleteCard\",value:function deleteCard(cardId){return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:{authorization:this._handleGetToken(),\"content-type\":\"application/json\"}}).then(this._handleResponse);}},{key:\"updateAvatar\",value:function updateAvatar(avatar){return fetch(\"\".concat(this._url,\"/users/me/avatar\"),{method:\"PATCH\",headers:{authorization:this._handleGetToken(),\"content-type\":\"application/json\"},body:JSON.stringify({avatar:avatar})}).then(this._handleResponse);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isLiked){return fetch(\"\".concat(this._url,\"/cards/\").concat(cardId,\"/likes\"),{method:isLiked?\"PUT\":\"DELETE\",headers:{authorization:this._handleGetToken(),\"content-type\":\"application/json\"}}).then(this._handleResponse);}},{key:\"checkToken\",value:function checkToken(){return fetch(\"\".concat(this._url,\"/users/me\"),{method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",authorization:this._handleGetToken()}}).then(this._handleResponse);}},{key:\"authorize\",value:function authorize(email,password){return fetch(\"\".concat(this._url,\"/signin\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(this._handleResponse);}},{key:\"register\",value:function register(email,password){return fetch(\"\".concat(this._url,\"/signup\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(this._handleResponse);}}]);return Api;}();var api=new Api(url);export default api;","map":{"version":3,"sources":["C:/Users/chakrygin/dev/react-mesto-api-full/frontend/src/utils/api.js"],"names":["url","Api","_url","res","ok","Promise","reject","status","json","localStorage","getItem","fetch","headers","authorization","_handleGetToken","then","_handleResponse","name","about","method","body","JSON","stringify","link","cardId","avatar","isLiked","Accept","email","password","api"],"mappings":"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","sourcesContent":["import { url } from \"./utils\";\r\n\r\nclass Api {\r\n  constructor() {\r\n    this._url = url;\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  _handleGetToken() {\r\n    return `Bearer ${localStorage.getItem(\"jwt\")}`;\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  updateUserInfo(name, about) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ name, about }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  addCard(name, link) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ name, link }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  updateAvatar(avatar) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ avatar }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    return fetch(`${this._url}/cards/${cardId}/likes`, {\r\n      method: isLiked ? \"PUT\" : \"DELETE\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  checkToken() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        authorization: this._handleGetToken(),\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n  authorize(email, password) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    }).then(this._handleResponse);\r\n  }\r\n  register(email, password) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    }).then(this._handleResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api(url);\r\nexport default api;\r\n"]},"metadata":{},"sourceType":"module"}