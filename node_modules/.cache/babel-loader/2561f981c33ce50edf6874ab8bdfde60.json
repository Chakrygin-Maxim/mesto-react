{"ast":null,"code":"import { url } from \"./utils\";\n\nclass Api {\n  constructor() {\n    this._url = url;\n  }\n\n  _handleResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  _handleGetToken() {\n    return `Bearer ${localStorage.getItem(\"jwt\")}`;\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      headers: {\n        authorization: this._handleGetToken(),\n        \"content-type\": \"application/json\"\n      }\n    }).then(this._handleResponse);\n  }\n\n  updateUserInfo(name, about) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        authorization: this._handleGetToken(),\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        about\n      })\n    }).then(this._handleResponse);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      headers: {\n        authorization: this._handleGetToken(),\n        \"content-type\": \"application/json\"\n      }\n    }).then(this._handleResponse);\n  }\n\n  addCard(name, link) {\n    return fetch(`${this._url}/cards`, {\n      method: \"POST\",\n      headers: {\n        authorization: this._handleGetToken(),\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        link\n      })\n    }).then(this._handleResponse);\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: this._handleGetToken(),\n        \"content-type\": \"application/json\"\n      }\n    }).then(this._handleResponse);\n  }\n\n  updateAvatar(avatar) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: {\n        authorization: this._handleGetToken(),\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        avatar\n      })\n    }).then(this._handleResponse);\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return fetch(`${this._url}/cards/${cardId}/likes/`, {\n      method: isLiked ? \"PUT\" : \"DELETE\",\n      headers: {\n        authorization: this._handleGetToken(),\n        \"content-type\": \"application/json\"\n      }\n    }).then(this._handleResponse);\n  }\n\n  checkToken(token) {\n    return fetch(`${this._url}/users/me`, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        authorization: this._handleGetToken()\n      }\n    }).then(this._handleResponse);\n  }\n\n  authorize(email, password) {\n    return fetch(`${this._url}/signin`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._handleResponse);\n  }\n\n  register(email, password) {\n    return fetch(`${this._url}/signup`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._handleResponse);\n  }\n\n}\n\nconst api = new Api(url);\nexport default api;","map":{"version":3,"sources":["C:/Users/chakrygin/dev/mesto-react/src/utils/api.js"],"names":["url","Api","constructor","_url","_handleResponse","res","ok","Promise","reject","status","json","_handleGetToken","localStorage","getItem","getUserInfo","fetch","headers","authorization","then","updateUserInfo","name","about","method","body","JSON","stringify","getInitialCards","addCard","link","deleteCard","cardId","updateAvatar","avatar","changeLikeCardStatus","isLiked","checkToken","token","Accept","authorize","email","password","register","api"],"mappings":"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","sourcesContent":["import { url } from \"./utils\";\r\n\r\nclass Api {\r\n  constructor() {\r\n    this._url = url;\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  _handleGetToken() {\r\n    return `Bearer ${localStorage.getItem(\"jwt\")}`;\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  updateUserInfo(name, about) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ name, about }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  addCard(name, link) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ name, link }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  updateAvatar(avatar) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ avatar }),\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    return fetch(`${this._url}/cards/${cardId}/likes/`, {\r\n      method: isLiked ? \"PUT\" : \"DELETE\",\r\n      headers: {\r\n        authorization: this._handleGetToken(),\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        authorization: this._handleGetToken(),\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n  authorize(email, password) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    }).then(this._handleResponse);\r\n  }\r\n  register(email, password) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    }).then(this._handleResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api(url);\r\nexport default api;\r\n"]},"metadata":{},"sourceType":"module"}